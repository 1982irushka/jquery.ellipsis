/*!
 * jQuery.ellipsis
 * http://github.com/jjenzz/jquery.ellipsis
 * --------------------------------------------------------------------------
 * Copyright (c) 2013 J. Smith (@jjenzz)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * adds a class to the last 'allowed' line of text so you can apply
 * text-overflow: ellipsis;
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(c){var b='<span style="white-space: nowrap;">',d={lines:"auto",ellipClass:"ellip",responsive:false};function a(g,q){var l=this,w=0,f=[],j,p,h,e,i,m,o,s;l.$cont=c(g);l.opts=c.extend({},d,q);l.opts.ellipLineClass=l.opts.ellipClass+"-line";function n(){l.text=l.$cont.text();l.$el=c('<span class="'+l.opts.ellipClass+'" />');l.$el.text(l.text);l.$cont.empty().append(l.$el);t()}function t(){if(typeof l.opts.lines==="number"&&l.opts.lines<2){l.$el.addClass(l.opts.ellipLineClass);return}o=l.$el.height();if(l.opts.lines==="auto"&&l.$el.prop("scrollHeight")<=o){return}if(!j){return}s=c.trim(l.text).split(/\s+/);l.$el.html(b+s.join("</span> "+b)+"</span>");l.$el.find("span").each(j);if(p!=null){u(p)}}function u(x){s[x]='<span class="'+l.opts.ellipLineClass+'">'+s[x];s.push("</span>");l.$el.html(s.join(" "))}if(l.opts.lines==="auto"){var r=function(y,A){var x=c(A),z=x.position().top;i=i||x.height();if(z===e){f[w].push(x)}else{e=z;w+=1;f[w]=[x]}if(z+i>o){p=y-f[w-1].length;return false}};j=r}if(typeof l.opts.lines==="number"&&l.opts.lines>1){var k=function(y,A){var x=c(A),z=x.position().top;if(z!==e){e=z;w+=1}if(w===l.opts.lines){p=y;return false}};j=k}if(l.opts.responsive){var v=function(){f=[];w=0;e=null;p=null;l.$el.html(l.text);clearTimeout(h);h=setTimeout(t,100)};c(window).on("resize.ellipsis",v)}n()}c.fn.ellipsis=function(e){return this.each(function(){try{c(this).data("ellipsis",(new a(this,e)))}catch(f){if(window.console){console.error("ellipsis: "+f)}}})}}));
