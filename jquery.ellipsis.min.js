/*!
 * jQuery.ellipsis
 * http://github.com/jjenzz/jquery.ellipsis
 * --------------------------------------------------------------------------
 * Copyright (c) 2013 J. Smith (@jjenzz)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * adds a class to the last 'allowed' line of text so you can apply
 * text-overflow: ellipsis;
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(c){var b='<span style="white-space: nowrap;">',d={lines:"auto",ellipClass:"ellip",responsive:false};function a(g,p){var l=this,v=0,f=[],j,o,h,e,i,m,r;l.$cont=c(g);l.opts=c.extend({},d,p);function n(){l.text=l.$cont.text();l.opts.ellipLineClass=l.opts.ellipClass+"-line";l.$el=c('<span class="'+l.opts.ellipClass+'" />');l.$el.text(l.text);l.$cont.empty().append(l.$el);s()}function s(){if(typeof l.opts.lines==="number"&&l.opts.lines<2){l.$el.addClass(l.opts.ellipLineClass);return}m=l.$cont.innerHeight();if(l.opts.lines==="auto"&&l.$el.prop("scrollHeight")<=m){return}if(!j){return}r=c.trim(l.text).split(/\s+/);l.$el.html(b+r.join("</span> "+b)+"</span>");l.$el.find("span").each(j);if(o!=null){t(o)}}function t(w){r[w]='<span class="'+l.opts.ellipLineClass+'">'+r[w];r.push("</span>");l.$el.html(r.join(" "))}if(l.opts.lines==="auto"){var q=function(x,z){var w=c(z),y=w.position().top;i=i||w.height();if(y===e){f[v].push(w)}else{e=y;v+=1;f[v]=[w]}if(y+i>m){o=x-f[v-1].length;return false}};j=q}if(typeof l.opts.lines==="number"&&l.opts.lines>1){var k=function(x,z){var w=c(z),y=w.position().top;if(y!==e){e=y;v+=1}if(v===l.opts.lines){o=x;return false}};j=k}if(l.opts.responsive){var u=function(){f=[];v=0;e=null;o=null;l.$el.html(l.text);clearTimeout(h);h=setTimeout(s,100)};c(window).on("resize.ellipsis",u)}n()}c.fn.ellipsis=function(e){return this.each(function(){try{c(this).data("ellipsis",(new a(this,e)))}catch(f){if(window.console){console.error("ellipsis: "+f)}}})}}));
